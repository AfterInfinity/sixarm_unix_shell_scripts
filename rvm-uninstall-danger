#/bin/sh
#
# Uninstall RVM (Ruby Version Manager). THIS IS DANGEROUS.
#
# This runs rvm implode, delete RVM files from the system,
# deletes /home/*/.rvmrc files and /home/*/.rvm directories,
# and uninstalls all RVM gems. We run this script as root.
# We run this script to clean up our system for rbenv.
#
# If rvm implode gives errors like this:
#    line 72: /usr/local/rvm/scripts/rvm: No such file or directory

echo "rvm implode"
rvm implode

echo "removing rvm files"
rm -f /usr/local/bin/rvm
rm -rf /usr/local/rvm/scripts
rm -f /etc/rvmrc
rm -f /home/*/.rvmrc
rm -rf /home/*/.rvm

echo "gem uninstall -a -a rvm"
gem uninstall -a -q rvm

echo "find any remaining .rvmrc files to delete by hand"
find / -name .rvmrc